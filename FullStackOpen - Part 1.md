# [Part 1](https://fullstackopen.com/en/part1)

## [Introduction to React](https://fullstackopen.com/en/part1/introduction_to_react)

### Component

The simplified default code below uses an implicit return of the `<div><p>Hello World</p></div>`.

```js
import React from 'react'
import ReactDOM from 'react-dom'

const App = () => (
  <div>
    <p>Hello world</p>
  </div>
)

ReactDOM.render(<App />, document.getElementById('root'))
```

In the Component section, this implicit return is now made explicit and a console.log is added.  Note the HTML is wrapped in paratheses in the first example. In the code below, they have been swapped for curly brackets to wrap the `console.log` and `return` statements.

```js
const App = () => {
  console.log('Hello from component')
  return (
    <div>
      <p>Hello world</p>
    </div>
  )
}
```


The component (code wrapped inside the {curly braces}), can also include JavaScript code. "Any JavaScript code within the curly braces is evaluated and the result of this evaluation is embedded into the defined place in the HTML produced by the component."

Additional notes:
* React component names must be capitalized.
* React compnents (usually) need to contain **one root element**. You cannot return a `<h1>`, `<p>`, and `<img>`. But you can if they are all wrapped in a `<div>`
* The other option is to return an *array* of components like this:
```js
const App = () => {
  return [
    <h1>Greetings</h1>,
    <Hello name="Maya" age={26 + 10} />,
    <Footer />
  ]
}
```
* "However, when defining the root component of the application this is not a particularly wise thing to do, and it makes the code look a bit ugly."<br><br>"Because the root element is stipulated, we have "extra" div-elements in the DOM-tree. This can be avoided by using [fragments](https://reactjs.org/docs/fragments.html#short-syntax), i.e. by wrapping the elements to be returned by the component with an empty element:"
```js
const App = () => {
  const name = 'Peter'
  const age = 10

  return (
    <>
      <h1>Greetings</h1>
      <Hello name="Maya" age={26 + 10} />
      <Hello name={name} age={age} />
      <Footer />
    </>
  )
}
```

"It now compiles successfully, and the DOM generated by React no longer contains the extra div-element."



### JSX

While React components appear to be returning HTML markup, that's not accurate. React components are mostly written in [JSX](https://reactjs.org/docs/introducing-jsx.html).  It looks like HTMl but is in fact a way of writing JavaScript that is compiled into plain JavaScript. [Here's how the example looks after compiling](https://fullstackopen.com/en/part1/introduction_to_react#jsx).

The compiling is handled by a tool called [Babel](https://babeljs.io/repl/) and React projects created with  `create-react-app` are automatically configured to use Babel.

JSX is very similar to HTML, with the advantage of embedding dynamic content via { JavaScript enclosed in curly brackets}.

JSX is "XML-like" which means every tag must be closed. If you using an empty element like `<br>` or `<hr>`, the tag must be closed like `<br />` and `<hr />`.


### Multiple Components
 
 Components can be reused multiple times and combined to make more complex applications. Composing applications from many specialized reusable components is a core philosophy of React.
 
 ### props: passing data to components
 
 Data can be passed to components as an object argument known as [`props`](https://reactjs.org/docs/components-and-props.html) (props stands for properties).
 
 >"There can be an arbitrary number of props and their values can be "hard coded" strings or results of JavaScript expressions. If the value of the prop is achieved using JavaScript it must be wrapped with curly braces."


## [JavaScript](https://fullstackopen.com/en/part1/java_script)

> "[const](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const) does not actually define a variable but a _constant_ for which the value can no longer be changed. On the other hand [let](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let) defines a normal variable."

> "For a long time, the only way to define variables...In specific situations, var works in a [different](https://medium.com/craft-academy/javascript-variables-should-you-use-let-var-or-const-394f7645c88f) [way](http://www.jstips.co/en/javascript/keyword-var-vs-let/) compared to variable definitions in most languages. During this course the use of var is ill-advised and you should stick with using const and let! You can find more on this topic on YouTube - e.g. [var, let and const - ES6 JavaScript Features](https://youtu.be/sjyJBL5fkp8)''

> "When using React, techniques from functional programming are often used. One characteristic of the functional programming paradigm is the use of [immutable](https://en.wikipedia.org/wiki/Immutable_object) data structures. In React code, it is preferable to use the method [concat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat), which does not add the item to the array, but creates a new array in which the content of the old array and the new item are both included."

### Object methods and "this"

Thanks to React Hooks objects no longer need to be defined with methods. However, understanding `this` is important for dealing with older versions of React and JavaScript.

> "Arrow functions and functions defined using the _function_ keyword vary substantially when it comes to how they behave with respect to the keyword [this](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this), which refers to the object itself."

A method can also be assigned to an object after the creation of the object:

```js
objectName.methodName = function () {
	// what the method does
}
```

You can also store a *method reference* in a variable, calling the method through the variable.

```js
const referenceToMethodName = objectName.methodName
```

**Important!**
> "When calling the method through a reference, the method loses knowledge of what was the original _this_. Contrary to other languages, in JavaScript the value of [this](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this) is defined based on _how the method is called_. When calling the method through a reference the value of _this_ becomes the so-called [global object](https://developer.mozilla.org/en-US/docs/Glossary/Global_object) and the end result is often not what the software developer had originally intended."

> "Losing track of _this_ when writing JavaScript code brings forth a few potential issues. Situations often arise where React or Node (or more specifically the JavaScript engine of the web browser) needs to call some method in an object that the developer has defined. However, in this course we avoid these issues by using the "this-less" JavaScript."

> "One situation leading to the "disappearance" of _this_ arises when we set a timeout to call the _greet_ function on the _arto_ object, using the [setTimeout](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout) function."

```js
const arto = {
  name: 'Arto Hellas',
  greet: function() {
    console.log('hello, my name is ' + this.name)
  },
}

setTimeout(arto.greet, 1000)
```

> "As mentioned, the value of _this_ in JavaScript is defined based on how the method is being called. When _setTimeout_ is calling the method, it is the JavaScript engine that actually calls the method and, at that point, _this_ refers to the global object."

> "There are several mechanisms by which the original _this_ can be preserved. One of these is using a method called [bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind):"

```js
setTimeout(arto.greet.bind(arto), 1000)
```

> "Calling _arto.greet.bind(arto)_ creates a new function where _this_ is bound to point to Arto, independent of where and how the method is being called."

> "Using [arrow functions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions) it is possible to solve some of the problems related to _this_. They should not, however, be used as methods for objects because then _this_ does not work at all. We will come back later to the behavior of _this_ in relation to arrow functions."


### Classes

> "The ES6 class syntax is used a lot in "old" React and also in Node.js, hence an understanding of it is beneficial even in this course. However, since we are using the new [Hooks](https://reactjs.org/docs/hooks-intro.html) feature of React throughout this course, we have no concrete use for JavaScript's class syntax."


## [Component state, event handlers](https://fullstackopen.com/en/part1/component_state_event_handlers)

### Destructuring

[Destructuring](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment) is a more efficient way (new in ES6) of assigning values from objects and arrays.

```js
props = {
  name: 'Arto Hellas',
  age: 35,
}
```

Given the props above, name and age variables can be created thus:

```js
const Hello = (props) => {
  const name = props.name
  const age = props.age
```

Via destructuring, this can be shorten to:

```js
const Hello = (props) => {
  const { name, age } = props
```

It can be further simplified to:

```js
const Hello = ({ name, age }) => {
```

### Stateful component

When your components are working with JavaScript variables, repeated calls to the `ReactDOM.render` method will re-render components **but is not recommended.**

A better approach is to use state with the help of React's [state hook](https://reactjs.org/docs/hooks-state.html). The block quotes below are from the official state hook docs.

> "**What is a Hook?** A Hook is a special function that lets you “hook into” React features. For example, `useState` is a Hook that lets you add React state to function components."

> "**When would I use a Hook?** If you write a function component and realize you need to add some state to it, previously you had to convert it to a class. Now you can use a Hook inside the existing function component."

> "**What does calling `useState` do?** It declares a “state variable”. Our variable is called `count` but we could call it anything else, like `banana`. This is a way to “preserve” some values between the function calls — `useState` is a new way to use the exact same capabilities that `this.state`provides in a class. Normally, variables “disappear” when the function exits but state variables are preserved by React."

> "**What do we pass to `useState` as an argument?** The only argument to the `useState()` Hook is the initial state. Unlike with classes, the state doesn’t have to be an object. We can keep a number or a string if that’s all we need. In our example, we just want a number for how many times the user clicked, so pass `0` as initial state for our variable. **(If we wanted to store two different values in state, we would call `useState()` twice.)**"

> "**What does `useState` return?** It returns a pair of values: the current state and a function that updates it. This is why we write `const [count, setCount] = useState()`. This is similar to `this.state.count` and `this.setState` in a class, except you get them in a pair. If you’re not familiar with the syntax we used, we’ll come back to it [at the bottom of this page](https://reactjs.org/docs/hooks-state.html#tip-what-do-square-brackets-mean)."

### Event handling
…

### Passing state to child components
Best practice: [Lift the state up in the component hierarchy:](https://reactjs.org/docs/lifting-state-up.html)

> "Often, several components need to reflect the same changing data. We recommend lifting the shared state up to their closest common ancestor."[official docs](https://reactjs.org/docs/lifting-state-up.html)

> "The DOM `<button>` element’s `onClick` attribute has a special meaning to React because it is a built-in component. For custom components…the naming is up to you…In React, it’s conventional to use `on[Event]` names for props which represent events and `handle[Event]` for the methods which handle the events." [official docs](https://reactjs.org/tutorial/tutorial.html)

Changes in state cause components to automatically rerender.

### Refactoring the components

When a component is just using one or a small number of values, you can use destructuring  to simplify the component.

This:
```js
const Display = (props) => {
  return (
    <div>{props.counter}</div>
  )
}
```

Simplifies to:
```js
const Display = ({ counter }) => {
  return (
    <div>{counter}</div>
  )
}
```

And this:
```js
const Button = (props) => {
  return (
    <button onClick={props.handleClick}>
      {props.text}
    </button>
  )
}
```

Simplifies to:
```js
const Button = ({ handleClick, text }) => (
  <button onClick={handleClick}>
    {text}
  </button>
)
```


  
## [A more complex state, debugging React apps](https://fullstackopen.com/en/part1/a_more_complex_state_debugging_react_apps)

> "_it is forbidden in React to mutate state directly_, since it can result in unexpected side effects. Changing state has to always be done by setting the state to a new object. If properties from the previous state object are not changed, they need to simply be copied, which is done by copying those properties into a new object, and setting that as the new state."

> "There are situations where it can be beneficial to store a piece of application state in a more complex data structure. [The official React documentation](https://reactjs.org/docs/hooks-faq.html#should-i-use-one-or-many-state-variables) contains some helpful guidance on the topic."

> "In this course we use the [state hook](https://reactjs.org/docs/hooks-state.html) to add state to our React components, which is part of the newer versions of React and is available from version [16.8.0](https://www.npmjs.com/package/react/v/16.8.0) onwards. Before the addition of hooks, there was no way to add state to functional components. Components that required state had to be defined as [class](https://reactjs.org/docs/react-component.html) components, using the JavaScript class syntax."



> "Functions returning functions can be utilized in defining generic functionality that can be customized with parameters. The _hello_ function that creates the event handlers can be thought of as a factory that produces customized event handlers meant for greeting users."









